# CUDA线程组织练习题

## 题目：矩阵元素索引计算与打印

### 题目描述
编写一个CUDA程序，创建一个3×4的线程块网格（3个块，每个块有4×2个线程），每个线程打印出自己的全局线程ID和局部线程ID信息。

### 具体要求

1. **网格配置**：
   - 使用3个线程块（blockIdx.x = 0, 1, 2）
   - 每个线程块包含4×2个线程（threadIdx.x = 0,1,2,3；threadIdx.y = 0,1）

2. **输出格式**：
   每个线程输出以下信息：
   ```
   Block[块索引] Thread[线程x索引,线程y索引]: Global ID = 全局线程ID
   ```

3. **全局线程ID计算公式**：
   ```
   globalId = blockIdx.x * blockDim.x * blockDim.y + threadIdx.y * blockDim.x + threadIdx.x
   ```

### 预期输出示例
```
Block[0] Thread[0,0]: Global ID = 0
Block[0] Thread[1,0]: Global ID = 1
Block[0] Thread[2,0]: Global ID = 2
Block[0] Thread[3,0]: Global ID = 3
Block[0] Thread[0,1]: Global ID = 4
Block[0] Thread[1,1]: Global ID = 5
...
Block[2] Thread[3,1]: Global ID = 23
```

### 编程提示

1. 使用`dim3`结构体定义线程块的维度
2. 使用`blockIdx.x`、`threadIdx.x`、`threadIdx.y`获取线程索引
3. 使用`blockDim.x`、`blockDim.y`获取线程块维度
4. 记得调用`cudaDeviceSynchronize()`确保所有线程执行完毕

### 思考问题

1. 如果将线程块改为2×2×2的三维结构，全局ID计算公式应该如何修改？
2. 当线程数量很大时，为什么需要使用二维或三维的线程组织方式？
3. 线程的执行顺序是否与输出顺序一致？为什么？

### 扩展练习

完成基础题目后，尝试以下扩展：
1. 修改程序，让每个线程计算并输出自己在整个网格中的二维坐标(x,y)
2. 实现一个函数，根据全局线程ID反推出对应的块索引和线程索引
3. 比较不同线程组织方式（1D vs 2D vs 3D）的性能差异

---

**难度等级**: ⭐⭐⭐  
**预计完成时间**: 30-45分钟  
**知识点**: CUDA线程层次结构、线程索引计算、内核函数调用