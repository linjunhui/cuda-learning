根据您提供的CUDA学习材料，我来为您出一道CUDA编程练习题。

## CUDA编程练习题

### 题目：向量加法性能优化实验

#### 题目描述
基于CUDA中的线程组织知识，编写一个向量加法程序，通过实验不同的线程配置来优化性能，并分析GPU资源利用率。

#### 具体要求

1. **基础实现：**
   - 实现基本的向量加法核函数：`c[i] = a[i] + b[i]`
   - 支持不同大小的向量（建议测试：1024, 10000, 100000, 1000000个元素）
   - 添加边界检查，确保不会越界访问

2. **线程配置实验：**
   - 测试不同的线程块大小：32, 64, 128, 256, 512, 1024
   - 计算对应的网格大小：`gridSize = (n + blockSize - 1) / blockSize`
   - 测量每种配置的执行时间

3. **性能分析：**
   - 使用CUDA事件进行精确计时
   - 计算GPU占用率（理论线程数 vs 实际线程数）
   - 分析内存带宽利用率
   - 找出最优的线程配置

4. **扩展功能：**
   - 实现二维线程配置的向量加法
   - 比较一维和二维配置的性能差异
   - 添加错误检查机制

#### 相关知识点
- CUDA核函数定义和调用
- 线程层次结构（网格、线程块、线程）
- 线程索引计算
- 内存分配和传输
- CUDA事件计时
- GPU性能分析

#### 实现提示
- 使用`cudaEventCreate`、`cudaEventRecord`、`cudaEventSynchronize`进行计时
- 考虑使用`cudaMalloc`、`cudaMemcpy`进行内存管理
- 添加适当的错误检查（`cudaError_t`）
- 可以尝试使用`cudaOccupancyMaxPotentialBlockSize`来获取最优配置

#### 预期学习目标
- 深入理解CUDA线程组织对性能的影响
- 掌握GPU性能分析和优化方法
- 学会根据问题规模选择合适的线程配置
- 培养CUDA编程的调试和优化技能

#### 评分标准
- 基础功能实现（30%）
- 线程配置实验（30%）
- 性能分析质量（25%）
- 代码质量和错误处理（15%）

这道题目结合了您学习材料中的核心概念，既有理论知识的应用，又有实践操作的挑战，能够帮助您更好地掌握CUDA编程技能。