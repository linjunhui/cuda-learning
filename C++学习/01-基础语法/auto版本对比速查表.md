# C++ `auto` å…³é”®å­—ç‰ˆæœ¬å¯¹æ¯”é€ŸæŸ¥è¡¨

## ğŸš€ å¿«é€Ÿå‚è€ƒ

| C++æ ‡å‡† | å¹´ä»½ | æ ¸å¿ƒç‰¹æ€§ | ç¼–è¯‘é€‰é¡¹ | ç¤ºä¾‹ä»£ç  |
|---------|------|----------|----------|----------|
| **C++11** | 2011 | å˜é‡æ¨å¯¼ + å°¾ç½®è¿”å›ç±»å‹ | `-std=c++11` | `auto x = 42;`<br>`auto func() -> int;` |
| **C++14** | 2014 | çœç•¥å°¾ç½®è¿”å›ç±»å‹ | `-std=c++14` | `auto func() { return 42; }` |
| **C++17** | 2017 | ç»“æ„åŒ–ç»‘å®š | `-std=c++17` | `auto [a, b] = pair;` |
| **C++20** | 2020 | å‚æ•°ä¸­çš„auto | `-std=c++20` | `auto func(auto x);` |

## ğŸ“ è¯­æ³•å¯¹æ¯”

### å‡½æ•°å®šä¹‰æ¼”è¿›

```cpp
// C++11: å°¾ç½®è¿”å›ç±»å‹
template<typename T, typename U>
auto add(T a, U b) -> decltype(a + b) {
    return a + b;
}

// C++14: çœç•¥è¿”å›ç±»å‹
template<typename T, typename U>
auto add(T a, U b) {
    return a + b;
}

// C++20: å‚æ•°ä¸­çš„auto
auto add(auto a, auto b) {
    return a + b;
}
```

### å˜é‡æ¨å¯¼æ¼”è¿›

```cpp
// C++11: åŸºæœ¬å˜é‡æ¨å¯¼
auto x = 42;                    // int
auto y = 3.14;                  // double
auto vec = std::vector<int>();  // std::vector<int>

// C++17: ç»“æ„åŒ–ç»‘å®š
auto [a, b] = std::make_pair(1, 2.0);  // a=int, b=double
auto [key, value] = map.begin();        // è§£æ„è¿­ä»£å™¨

// C++20: å‚æ•°æ¨å¯¼
auto process(auto data) { return data * 2; }
```

## âš¡ ç¼–è¯‘æµ‹è¯•

```bash
# æµ‹è¯•ä¸åŒæ ‡å‡†
g++ -std=c++11  auto_test.cpp  # C++11ç‰¹æ€§
g++ -std=c++14  auto_test.cpp  # C++14ç‰¹æ€§  
g++ -std=c++17  auto_test.cpp  # C++17ç‰¹æ€§
g++ -std=c++20  auto_test.cpp  # C++20ç‰¹æ€§
```

## ğŸ¯ å…³é”®å·®å¼‚

| ç‰¹æ€§ | C++11 | C++14 | C++17 | C++20 |
|------|-------|-------|-------|-------|
| å˜é‡æ¨å¯¼ | âœ… | âœ… | âœ… | âœ… |
| å°¾ç½®è¿”å›ç±»å‹ | âœ… | âœ… | âœ… | âœ… |
| çœç•¥è¿”å›ç±»å‹ | âŒ | âœ… | âœ… | âœ… |
| ç»“æ„åŒ–ç»‘å®š | âŒ | âŒ | âœ… | âœ… |
| å‚æ•°ä¸­çš„auto | âŒ | âŒ | âŒ | âœ… |

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å…¼å®¹æ€§å†™æ³•
```cpp
// å…¼å®¹C++11çš„å†™æ³•
template<typename T, typename U>
auto add(T a, U b) -> decltype(a + b) {
    return a + b;
}
```

### 2. ç°ä»£å†™æ³•
```cpp
// C++20æ¨èå†™æ³•
auto add(auto a, auto b) {
    return a + b;
}
```

### 3. æ€§èƒ½è€ƒè™‘
```cpp
// âœ… å¥½çš„åšæ³•
auto result = expensive_computation();

// âŒ é¿å…é‡å¤æ¨å¯¼
for (int i = 0; i < 1000; ++i) {
    auto result = expensive_computation();  // æ¯æ¬¡éƒ½æ¨å¯¼
}
```

## ğŸ” å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæˆ‘çš„ä»£ç ç¼–è¯‘å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ç¼–è¯‘é€‰é¡¹ï¼Œç¡®ä¿ä½¿ç”¨äº†æ­£ç¡®çš„C++æ ‡å‡†ï¼š
```bash
g++ -std=c++20 your_code.cpp  # å¯¹äºC++20ç‰¹æ€§
```

### Q: autoä¼šå½±å“æ€§èƒ½å—ï¼Ÿ
A: ä¸ä¼šï¼Œautoæ˜¯ç¼–è¯‘æ—¶ç‰¹æ€§ï¼Œè¿è¡Œæ—¶æ— é¢å¤–å¼€é”€ã€‚

### Q: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨autoï¼Ÿ
A: 
- å¤æ‚ç±»å‹æ¨å¯¼
- æ¨¡æ¿ç¼–ç¨‹
- æé«˜ä»£ç å¯è¯»æ€§
- é¿å…ç±»å‹é‡å¤

## ğŸ“š å­¦ä¹ è·¯å¾„

1. **C++11**: æŒæ¡å˜é‡æ¨å¯¼å’Œå°¾ç½®è¿”å›ç±»å‹
2. **C++14**: å­¦ä¹ çœç•¥è¿”å›ç±»å‹è¯­æ³•
3. **C++17**: æŒæ¡ç»“æ„åŒ–ç»‘å®š
4. **C++20**: å­¦ä¹ å‚æ•°ä¸­çš„auto

---

**é€ŸæŸ¥è¡¨åˆ›å»ºæ—¶é—´**: 2024å¹´1æœˆ  
**é€‚ç”¨åœºæ™¯**: å¿«é€Ÿå‚è€ƒå’Œå¯¹æ¯”  
**æ›´æ–°é¢‘ç‡**: éšC++æ ‡å‡†æ›´æ–°























